<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>Multiservicios Integrales</title>
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <meta content="Free HTML Templates" name="keywords">
    <meta content="Free HTML Templates" name="description">

    <!-- logo -->
    <link href="img/logo_transparent.png" rel="icon">

    <!-- Google Web Fonts -->
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat&family=Roboto:wght@500;700&display=swap" rel="stylesheet"> 

    <!-- Font Awesome -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.10.0/css/all.min.css" rel="stylesheet">

    <!-- Libraries Stylesheet -->
    <link href="lib/owlcarousel/assets/owl.carousel.min.css" rel="stylesheet">
    <link href="lib/lightbox/css/lightbox.min.css" rel="stylesheet">

    <!-- Customized Bootstrap Stylesheet -->
    <link href="css/style.css" rel="stylesheet">
    <link href="css/partials.css" rel="stylesheet">
</head>

<body data-spy="scroll" data-target=".navbar" data-offset="51">
    <!-- Navbar Start -->
    <nav class="navbar fixed-top navbar-expand-lg navbar-dark py-2 px-lg-4">
        <div class="container">
            <a href="index.html" class="navbar-brand d-flex align-items-center">
                <img src="img/logo_transparent.png" alt="Logo" style="height:40px; width:auto;">
                <span class="brand-title d-none d-lg-inline ml-2">Multiservicios Integrales</span>
                <span class="brand-title-mobile d-lg-none ml-2" style="font-size:0.95rem; font-weight:700;">Multiservicios</span>
            </a>

            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarCollapse" aria-controls="#navbarCollapse" aria-expanded="false" aria-label="Toggle navigation">
                <i class="fas fa-bars" aria-hidden="true"></i>
            </button>

            <div class="collapse navbar-collapse" id="navbarCollapse">
                <ul class="navbar-nav mr-auto ml-lg-4">
                    <li class="nav-item"><a class="nav-link" href="#home">Inicio</a></li>
                    <li class="nav-item"><a class="nav-link" href="#about">Acerca de</a></li>
                    <li class="nav-item dropdown-menu-parent">
                        <a class="nav-link" href="#service" role="button" aria-expanded="false" aria-haspopup="true">Servicios <span class="dropdown-caret">▼</span></a>
                        <div class="dropdown-menu-services" style="display:none;">
                            <a href="#refrigeracion" class="dropdown-item">Refrigeración</a>
                            <a href="#informatica" class="dropdown-item">Sistemas Informáticos</a>
                            <a href="#electricidad" class="dropdown-item">Electricidad</a>
                        </div>
                    </li>
                    <li class="nav-item"><a class="nav-link" href="#project">Proyectos</a></li>
                </ul>

                <div class="navbar-socials-mobile d-lg-none mb-3">
                    <a href="https://www.facebook.com/" target="_blank" rel="noopener" aria-label="Facebook" class="navbar-social-icon">
                        <i class="fab fa-facebook-f"></i>
                    </a>
                    <a href="https://www.instagram.com/" target="_blank" rel="noopener" aria-label="Instagram" class="navbar-social-icon">
                        <i class="fab fa-instagram"></i>
                    </a>
                    <a href="https://wa.me/" target="_blank" rel="noopener" aria-label="WhatsApp" class="navbar-social-icon">
                        <i class="fab fa-whatsapp"></i>
                    </a>
                </div>

                <div class="d-flex align-items-center">
                    <div class="navbar-socials mr-lg-3">
                        <a href="https://www.facebook.com/" target="_blank" rel="noopener" aria-label="Facebook" class="navbar-social-icon">
                            <i class="fab fa-facebook-f"></i>
                        </a>
                        <a href="https://www.instagram.com/" target="_blank" rel="noopener" aria-label="Instagram" class="navbar-social-icon">
                            <i class="fab fa-instagram"></i>
                        </a>
                        <a href="https://wa.me/" target="_blank" rel="noopener" aria-label="WhatsApp" class="navbar-social-icon">
                            <i class="fab fa-whatsapp"></i>
                        </a>
                    </div>
                    <a href="#contact" class="btn btn-primary cta-btn ml-lg-3" aria-label="Contactar">Contactar</a>
                </div>
            </div>
        </div>
    </nav>
    <!-- Navbar End -->


    <!-- Carousel (cargado desde partials/hero.html) -->
    <div id="partial-hero" data-partial="partials/hero.html"></div>

    <!-- About (cargado desde partials/about.html) -->
    <div id="partial-about" data-partial="partials/about.html"></div>

    <!-- Servicios (cargado desde partials/services.html) -->
    <div id="partial-services" data-partial="partials/services.html"></div>

        <!-- Gallery (cargado desde partials/gallery.html) -->
        <div id="partial-gallery" data-partial="partials/gallery.html"></div>
        <!-- Gallery placeholder end -->

    <!-- Contact (cargado desde partials/contact.html) -->
    <div id="partial-contact" data-partial="partials/contact.html"></div>
    <!-- Contact placeholder end -->

    <div id="partial-footer" data-partial="partials/footer.html"></div>

    <!-- Scroll to Bottom -->
    <i class="fa fa-2x fa-angle-down text-white scroll-to-bottom"></i>

    <!-- Back to Top -->
    <a href="#" class="btn btn-lg btn-outline-primary btn-lg-square back-to-top"><i class="fa fa-angle-double-up"></i></a>

    <!-- JavaScript Libraries -->
    <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.bundle.min.js"></script>
    <script src="lib/easing/easing.min.js"></script>
    <script src="lib/waypoints/waypoints.min.js"></script>
    <script src="lib/owlcarousel/owl.carousel.min.js"></script>
    <script src="lib/isotope/isotope.pkgd.min.js"></script>
    <script src="https://unpkg.com/imagesloaded@4/imagesloaded.pkgd.min.js"></script>
    <script src="lib/lightbox/js/lightbox.min.js"></script>

    <!-- Contact Javascript File -->
    <script src="mail/jqBootstrapValidation.min.js"></script>
    <script src="mail/contact.js"></script>

    <!-- Template Javascript -->
    <script src="js/main.js"></script>

    <!-- Navbar toggle icon change script -->
    <script>
    (function($){
        $(function(){
            var $collapse = $('#navbarCollapse');
            var $toggler = $('.navbar-toggler');
            var $icon = $toggler.find('i');

            $collapse.on('show.bs.collapse', function(){
                $icon.removeClass('fa-bars').addClass('fa-times');
                $toggler.addClass('open');
            });
            $collapse.on('hide.bs.collapse', function(){
                $icon.removeClass('fa-times').addClass('fa-bars');
                $toggler.removeClass('open');
            });

            // Close collapse when clicking any link or button inside the panel (only on small screens)
            $collapse.on('click', 'a, button, .cta-btn', function(){
                if (window.matchMedia('(max-width:991.98px)').matches) {
                    $collapse.collapse('hide');
                }
            });
        });
    })(jQuery);
    </script>

    <script>
        (function(){
            // simple numeric animation
            function animateValue(el, start, end, duration, suffix) {
                var startTime = null;
                function step(timestamp) {
                    if (!startTime) startTime = timestamp;
                    var progress = Math.min((timestamp - startTime) / duration, 1);
                    var current = Math.floor(progress * (end - start) + start);
                    el.textContent = current + (suffix || '');
                    if (progress < 1) {
                        requestAnimationFrame(step);
                    } else {
                        el.textContent = end + (suffix || '');
                    }
                }
                requestAnimationFrame(step);
            }
            var aboutCard = document.querySelector('.about-card');
            if (!aboutCard) return;
            var observer = new IntersectionObserver(function(entries, obs){
                entries.forEach(function(entry){
                    if (entry.isIntersecting) {
                        var values = document.querySelectorAll('.about-stats .value');
                        values.forEach(function(v){
                            var target = parseInt(v.getAttribute('data-target')) || 0;
                            var suffix = v.getAttribute('data-suffix') || '';
                            var duration = 1100 + Math.min(1400, target * 2);
                            animateValue(v, 0, target, duration, suffix);
                        });
                        obs.unobserve(entry.target);
                    }
                });
            }, { threshold: 0.35 });

            observer.observe(aboutCard);
        })();
    </script>

    <!-- Gallery initialization moved to partial loader so it runs after gallery is injected -->
    <!-- responsive & small adjustments moved to css/partials.css -->
    <!-- navbar and helpers moved to css/partials.css -->
        <script>
            // Cargador de parciales: reemplaza placeholders con contenido HTML desde 'partials/*' y ejecuta inicializadores
            (function(){
                // animación numérica simple
                function animateValue(el, start, end, duration, suffix) {
                    var startTime = null;
                    function step(timestamp) {
                        if (!startTime) startTime = timestamp;
                        var progress = Math.min((timestamp - startTime) / duration, 1);
                        var current = Math.floor(progress * (end - start) + start);
                        el.textContent = current + (suffix || '');
                        if (progress < 1) {
                            requestAnimationFrame(step);
                        } else {
                            el.textContent = end + (suffix || '');
                        }
                    }
                    requestAnimationFrame(step);
                }

                // inicializar animación de contadores dentro del contenedor dado
                function initAboutStats(container){
                    var card = container.querySelector('.about-card') || document.querySelector('.about-card');
                    if(!card) return;
                    var values = (container.querySelectorAll ? container.querySelectorAll('.about-stats .value') : []);
                    // si ya fueron inicializados (por ejemplo texto distinto a 0), no volver a ejecutar
                    if(!values || values.length === 0) return;

                    var observer = new IntersectionObserver(function(entries, obs){
                        entries.forEach(function(entry){
                            if(entry.isIntersecting){
                                values.forEach(function(v){
                                    var target = parseInt(v.getAttribute('data-target')) || 0;
                                    var suffix = v.getAttribute('data-suffix') || '';
                                    var duration = 1100 + Math.min(1400, target * 2);
                                    animateValue(v, 0, target, duration, suffix);
                                });
                                obs.unobserve(entry.target);
                            }
                        });
                    }, { threshold: 0.35 });

                    observer.observe(card);
                }

                function loadPartial(id, url){
                    var el = document.getElementById(id);
                    if(!el) return Promise.resolve();
                    return fetch(url, {cache: 'no-cache'}).then(function(r){
                        if(!r.ok) throw new Error('Error cargando ' + url);
                        return r.text();
                    }).then(function(html){
                        el.innerHTML = html;
                        // marcar como cargado para facilitar debugging y estilos condicionales
                        el.setAttribute('data-partial-loaded', 'true');
                        console.log('partial loaded:', id, url);
                        // reinitialize bootstrap components inside partial if needed
                        if(window.jQuery && window.$){
                            try{ window.$(el).find('[data-ride="carousel"]').carousel(); }catch(e){}
                        }

                        // inicializadores específicos según contenido
                        try{
                                if(el.querySelector('.about-stats')){
                                    // add a class to each stat wrapper before animating so CSS can animate them
                                    var stats = el.querySelectorAll('.about-stats .stat');
                                    stats.forEach(function(s){ s.classList.add('stat-ready'); });
                                    initAboutStats(el);
                                    // when animation starts, add visible class to trigger pop
                                    setTimeout(function(){ stats.forEach(function(s){ s.classList.add('stat-animate'); }); }, 120);
                                }

                                // inicializar galería (Isotope + filtros + Mostrar más) cuando el partial tenga la grid
                                if (el.querySelector('.gallery-grid')) {
                                    (function(){
                                        function mobileMode(){ return window.matchMedia('(max-width: 576px)').matches; }

                                        var itemsToShowInitial = mobileMode() ? 3 : Number.MAX_SAFE_INTEGER;
                                        var itemsIncrement = mobileMode() ? 3 : Number.MAX_SAFE_INTEGER;
                                        var itemsToShow = itemsToShowInitial;

                                        var $gridEl = $('.gallery-grid');
                                        // destroy previous isotope instance if exists (defensive)
                                        try{ if ($gridEl.data('isotope')) { $gridEl.isotope('destroy'); } }catch(e){}

                                        var $grid = $gridEl.isotope({
                                            itemSelector: '.gallery-item',
                                            percentPosition: true,
                                            layoutMode: 'fitRows'
                                        });

                                        var $loadBtn = $('.btn-load-more');
                                        var $actionsWrap = $loadBtn.closest('.gallery-actions');

                                        function applyLimit(){
                                            var isMobile = mobileMode();
                                            var filteredElems = $grid.isotope('getFilteredItemElements') || [];

                                            if(!isMobile){
                                                $(filteredElems).removeClass('hidden');
                                                $actionsWrap.hide();
                                                $grid.isotope('layout');
                                                return;
                                            }

                                            $(filteredElems).each(function(i, el){
                                                if(i < itemsToShow) $(el).removeClass('hidden');
                                                else $(el).addClass('hidden');
                                            });

                                            $grid.isotope('layout');

                                            if(filteredElems.length > itemsToShow) $actionsWrap.show();
                                            else $actionsWrap.hide();
                                        }

                                        // esperar imágenes
                                        imagesLoaded( $('.gallery-grid')[0], function(){
                                            $grid.isotope('layout');
                                            itemsToShowInitial = mobileMode() ? 3 : Number.MAX_SAFE_INTEGER;
                                            itemsIncrement = mobileMode() ? 3 : Number.MAX_SAFE_INTEGER;
                                            itemsToShow = itemsToShowInitial;
                                            applyLimit();
                                        });

                                        // filtros
                                        $('.filter-button').off('click.gallery').on('click.gallery', function(){
                                            $('.filter-button').removeClass('active');
                                            $(this).addClass('active');
                                            var filterValue = $(this).attr('data-filter');

                                            itemsToShowInitial = mobileMode() ? 3 : Number.MAX_SAFE_INTEGER;
                                            itemsIncrement = mobileMode() ? 3 : Number.MAX_SAFE_INTEGER;
                                            itemsToShow = itemsToShowInitial;

                                            $grid.isotope({ filter: filterValue });
                                            setTimeout(applyLimit, 120);
                                        });

                                        // mostrar más
                                        $loadBtn.off('click.gallery').on('click.gallery', function(){
                                            if(!mobileMode()) return;
                                            itemsToShow += itemsIncrement;
                                            applyLimit();
                                            setTimeout(function(){ $('html,body').animate({ scrollTop: $actionsWrap.offset().top - 120 }, 300); }, 80);
                                        });

                                        // resize
                                        var lastMobile = mobileMode();
                                        $(window).off('resize.gallery').on('resize.gallery', function(){
                                            var nowMobile = mobileMode();
                                            if(nowMobile !== lastMobile){
                                                itemsToShowInitial = nowMobile ? 3 : Number.MAX_SAFE_INTEGER;
                                                itemsIncrement = nowMobile ? 3 : Number.MAX_SAFE_INTEGER;
                                                itemsToShow = itemsToShowInitial;
                                                setTimeout(function(){ applyLimit(); }, 120);
                                                lastMobile = nowMobile;
                                            } else {
                                                $grid.isotope('layout');
                                            }
                                        });

                                    })();
                                }
                            }catch(e){ console.warn('initAboutStats fallo', e); }

                    }).catch(function(err){
                        el.innerHTML = '<div class="alert alert-warning p-3">No se pudo cargar la sección.</div>';
                        console.error(err);
                    });
                }

                document.addEventListener('DOMContentLoaded', function(){
                    // lista de placeholders a cargar
                    var parts = [
                      {id: 'partial-hero', url: 'partials/hero.html'},
                      {id: 'partial-about', url: 'partials/about.html'},
                      {id: 'partial-services', url: 'partials/services.html'},
                      {id: 'partial-gallery', url: 'partials/gallery.html'},
                      {id: 'partial-contact', url: 'partials/contact.html'},
                      {id: 'partial-footer', url: 'partials/footer.html'}
                    ];
                    parts.forEach(function(p){ loadPartial(p.id, p.url); });
                });
            })();
        </script>
</body>

</html>